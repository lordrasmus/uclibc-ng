name: riscv64-static

on:
  push:
    branches:
      - master2

jobs:

  call_build:
    uses: ./.github/workflows/z_build_workflow.yml
    with:
      toolchain: toolchain-riscv64-gcc-10
      gcc_prefix: riscv64-openadk-linux-uclibc-
      kernel_vers: 4.19.56
      kernel_dir: v4.x
      kernel_arch: riscv
      config_file: config.riscv64_static
      qemu_kernel: kernel-riscv64.img
      qemu_cmd: qemu-system-riscv64 -M virt -m 512 -nographic -append console=ttyS0  -kernel kernel.img -initrd rootfs.img.xz

#
# geht erstmal nicht weil libgcc_s.so gegen libc.so gelinkt ist
# bei der statischen uclibc gibt es die libc.so ja aber nicht 
# 
# anderen gcc erzeugen der f√ºr ne statische uclibc gedacht ist ??
#
#  call_images:
#    needs: call_build
#    uses: ./.github/workflows/z_images_workflow.yml
